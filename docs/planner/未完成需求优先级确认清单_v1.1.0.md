# 个人博客系统 - 未完成需求优先级确认清单

**版本**: v1.1.0  
**创建日期**: 2026-02-17  
**依据文档**: 需求完成度分析报告_v1.0.0.md、blog_prd_v1.0.0.md  
**状态**: 待确认

---

## 一、优先级重新梳理说明

### 1.1 优先级定义

| 级别 | 定义 | 说明 |
|------|------|------|
| **P0-紧急** | 阻塞核心功能 | 影响用户基本使用体验，必须立即修复 |
| **P1-重要** | 影响用户体验 | 功能不完整但可使用，应尽快完成 |
| **P2-增强** | 提升用户体验 | 锦上添花的功能，可延后处理 |

### 1.2 三阶段划分原则

| 阶段 | 目标 | 包含内容 | 预计周期 |
|------|------|----------|----------|
| **第一阶段** | 紧急修复 | 代码已存在仅需集成的功能 | 1-2天 |
| **第二阶段** | 核心补全 | 需要开发但影响核心体验的功能 | 3-5天 |
| **第三阶段** | 增强功能 | 提升体验但非必需的功能 | 2-3天 |

---

## 二、第一阶段：紧急修复

### 2.1 阶段目标

将已开发但未集成的功能快速接入系统，恢复完整的功能闭环。

### 2.1 阶段验收标准

| 序号 | 验收项 | 验收标准 |
|------|--------|----------|
| 1 | 前台路由完整性 | 所有前台页面可通过URL直接访问 |
| 2 | 后台菜单完整性 | 后台侧边栏显示所有管理模块入口 |
| 3 | 音乐播放器可用性 | 前台任意页面可使用音乐播放器 |
| 4 | 导航栏完整性 | 前台导航栏包含所有主要功能入口 |

---

### 2.2 第一阶段需求清单

#### REQ-001: 人间足迹路由配置

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-003-EXT |
| **优先级** | P0-紧急 |
| **当前状态** | 代码已存在，路由未配置 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：前台路由 `/gallery`
- **组件文件**：`pages/front/Gallery.tsx`（已存在）
- **导航入口**：前台导航栏添加"人间足迹"菜单项

**验收标准**：
- [ ] 访问 `/gallery` 可正常显示图片画廊页面
- [ ] 页面展示网格布局的图片列表
- [ ] 点击图片可弹出详情弹窗
- [ ] 页面顶部显示图片总数统计
- [ ] 导航栏"人间足迹"菜单项点击可跳转

---

#### REQ-002: 人生地图路由配置

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-005-EXT |
| **优先级** | P0-紧急 |
| **当前状态** | 代码已存在，路由未配置 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：前台路由 `/map`
- **组件文件**：`pages/front/MapPage.tsx`（已存在）
- **导航入口**：前台导航栏添加"人生地图"菜单项

**验收标准**：
- [ ] 访问 `/map` 可正常显示地图页面
- [ ] 地图正确加载并显示中国区域
- [ ] 已添加的城市在地图上显示标记点
- [ ] 点击城市标记弹出信息窗口
- [ ] 导航栏"人生地图"菜单项点击可跳转

---

#### REQ-003: 音乐播放器前台集成

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-007-EXT2 |
| **优先级** | P0-紧急 |
| **当前状态** | 组件已存在，未引入布局 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：前台页面底部固定栏
- **组件文件**：`components/MusicPlayer.tsx`（已存在）
- **布局要求**：固定在页面底部，z-index为50

**验收标准**：
- [ ] 前台所有页面底部显示音乐播放器
- [ ] 播放器显示当前曲目信息（标题、歌手、封面）
- [ ] 播放/暂停按钮可正常切换
- [ ] 上一首/下一首按钮可正常切换曲目
- [ ] 音量滑块可调节音量
- [ ] 进度条可拖动调整播放位置
- [ ] 播放列表可展开/收起
- [ ] 播放列表支持曲目搜索

---

#### REQ-004: 后台图片管理集成

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-003-EXT |
| **优先级** | P0-紧急 |
| **当前状态** | 组件已存在，路由和菜单未配置 |
| **依赖项** | 无 |

**功能细节**：
- **路由配置**：`/admin/images`
- **组件文件**：`pages/admin/ImageManage.tsx`（已存在）
- **菜单位置**：后台侧边栏"内容管理"分组下

**验收标准**：
- [ ] 访问 `/admin/images` 可正常显示图片管理页面
- [ ] 后台侧边栏显示"图片管理"菜单项
- [ ] 支持图片上传功能
- [ ] 支持图片删除功能
- [ ] 支持图片信息编辑（时间、地点、描述）
- [ ] 图片列表正确展示缩略图

---

#### REQ-005: 后台城市管理集成

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-003-EXT-2 |
| **优先级** | P0-紧急 |
| **当前状态** | 组件已存在，路由和菜单未配置 |
| **依赖项** | 无 |

**功能细节**：
- **路由配置**：`/admin/cities`
- **组件文件**：`pages/admin/CityManage.tsx`（已存在）
- **菜单位置**：后台侧边栏"内容管理"分组下

**验收标准**：
- [ ] 访问 `/admin/cities` 可正常显示城市管理页面
- [ ] 后台侧边栏显示"城市管理"菜单项
- [ ] 支持城市添加功能
- [ ] 支持城市编辑功能
- [ ] 支持城市删除功能（需二次确认）
- [ ] 城市列表正确展示城市信息

---

#### REQ-006: 后台音乐管理集成

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-003-EXT-3 |
| **优先级** | P0-紧急 |
| **当前状态** | 组件已存在，路由和菜单未配置 |
| **依赖项** | 无 |

**功能细节**：
- **路由配置**：`/admin/music`
- **组件文件**：`pages/admin/MusicManage.tsx`（已存在）
- **菜单位置**：后台侧边栏"内容管理"分组下

**验收标准**：
- [ ] 访问 `/admin/music` 可正常显示音乐管理页面
- [ ] 后台侧边栏显示"音乐管理"菜单项
- [ ] 支持音乐上传功能
- [ ] 支持音乐删除功能
- [ ] 支持音乐信息编辑（标题、歌手、封面）
- [ ] 音乐列表正确展示曲目信息

---

#### REQ-007: 前台导航栏扩展

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-001-EXT |
| **优先级** | P0-紧急 |
| **当前状态** | 导航项缺失 |
| **依赖项** | REQ-001, REQ-002, REQ-003 |

**功能细节**：
- **展示位置**：前台顶部导航栏
- **新增菜单项**：
  - 人间足迹 → 跳转 `/gallery`
  - 人生地图 → 跳转 `/map`
  - 音乐播放 → 展开/收起播放列表

**交互逻辑**：
- 导航项按顺序排列：首页 → 人间足迹 → 人生地图 → 分类 → 标签 → 关于
- 当前页面导航项高亮显示
- "音乐播放"为特殊项，点击展开播放列表而非跳转页面

**验收标准**：
- [ ] 导航栏显示"人间足迹"菜单项
- [ ] 导航栏显示"人生地图"菜单项
- [ ] 导航栏显示"音乐播放"菜单项（带图标）
- [ ] 点击"人间足迹"跳转到图片画廊页
- [ ] 点击"人生地图"跳转到地图页
- [ ] 点击"音乐播放"展开播放列表
- [ ] 当前页面导航项高亮

---

## 三、第二阶段：核心补全

### 3.1 阶段目标

补全影响核心用户体验的功能，完善系统主要功能闭环。

### 3.2 阶段验收标准

| 序号 | 验收项 | 验收标准 |
|------|--------|----------|
| 1 | 首页完整性 | 首页包含主页大图、时间轴、网站介绍 |
| 2 | 文章管理完整性 | 支持回收站恢复、归档查看 |
| 3 | 数据可视化 | 访问统计以图表形式展示 |
| 4 | 安全增强 | 登录失败限制、自动登出功能可用 |

---

### 3.3 第二阶段需求清单

#### REQ-008: 首页主页大图

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-002 |
| **优先级** | P1-重要 |
| **当前状态** | 未实现 |
| **依赖项** | REQ-009（时间轴组件） |

**功能细节**：
- **展示位置**：首页顶部，占据首屏主要区域
- **尺寸要求**：宽度100%，高度400-600px（响应式）
- **图片来源**：后台可配置上传
- **交互逻辑**：
  - 点击大图平滑滚动到时间轴区域
  - 大图上叠加网站标题和简介文字
  - 支持暗色遮罩以保证文字可读性

**验收标准**：
- [ ] 首页顶部显示主页大图
- [ ] 大图高度适配不同屏幕尺寸
- [ ] 大图上显示网站标题和简介
- [ ] 点击大图平滑滚动到时间轴区域
- [ ] 后台支持上传/更换主页大图

---

#### REQ-009: 首页时间轴

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-002-EXT |
| **优先级** | P1-重要 |
| **当前状态** | 完全缺失 |
| **依赖项** | 后端需新增Timeline实体和API |

**功能细节**：
- **展示位置**：首页主页大图下方
- **时间节点数量**：默认展示最近10个节点，支持"查看更多"
- **节点信息**：
  - 节点名称（必填，限50字）
  - 时间（必填，年月格式）
  - 描述（选填，限200字）
  - 配图（选填，支持上传）

**样式要求**：
- 采用垂直时间轴布局
- 奇数节点在左侧，偶数节点在右侧
- 时间轴中心线使用主题色
- 节点使用圆形标记，hover时放大
- 响应式：移动端改为单侧布局

**跳转逻辑**：
- 点击节点无跳转（仅展示信息）
- 如节点关联文章，显示"查看相关文章"链接

**验收标准**：
- [ ] 时间轴正确展示在主页大图下方
- [ ] 时间节点按时间倒序排列
- [ ] 每个节点显示名称、时间、描述
- [ ] 节点配图正确显示
- [ ] PC端左右交替布局正确
- [ ] 移动端单侧布局正确
- [ ] 后台支持时间轴节点的增删改

---

#### REQ-010: 首页网站介绍

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-002-EXT2 |
| **优先级** | P1-重要 |
| **当前状态** | 部分实现（仅有标题） |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：主页大图上叠加或大图下方独立区域
- **内容组成**：
  - 博客标题（必填）
  - 博客副标题/简介（选填，限100字）
  - 个人介绍（选填，限500字）

**样式要求**：
- 文字居中显示
- 使用白色文字配暗色遮罩（在大图上时）
- 或使用独立卡片区域（在大图下方时）

**验收标准**：
- [ ] 首页显示博客标题
- [ ] 首页显示博客副标题/简介
- [ ] 后台支持编辑网站介绍内容
- [ ] 文字样式美观可读

---

#### REQ-011: 文章回收站

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-002-EXT2 |
| **优先级** | P1-重要 |
| **当前状态** | 完全缺失 |
| **依赖项** | 后端需新增deletedAt字段 |

**功能细节**：
- **存储规则**：
  - 删除文章时不物理删除，设置deletedAt字段
  - 回收站保留期限：30天
  - 超过30天自动物理删除

- **恢复规则**：
  - 在回收站列表点击"恢复"按钮
  - 恢复后清除deletedAt字段
  - 恢复后文章状态保持删除前的状态

- **清理规则**：
  - 每日凌晨自动清理过期文章
  - 手动"彻底删除"需二次确认
  - 彻底删除后不可恢复

**界面设计**：
- 文章列表页新增"回收站"标签页
- 回收站列表显示：标题、删除时间、剩余天数
- 操作按钮：恢复、彻底删除

**验收标准**：
- [ ] 删除文章进入回收站而非物理删除
- [ ] 回收站列表正确显示已删除文章
- [ ] 显示每篇文章的剩余保留天数
- [ ] 点击"恢复"可恢复文章
- [ ] 点击"彻底删除"需二次确认
- [ ] 超过30天的文章自动清理
- [ ] 回收站文章不显示在前台

---

#### REQ-012: 文章归档

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-003 |
| **优先级** | P1-重要 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：前台独立页面 `/archive`
- **归档维度**：
  - 按年份分组（如2026年、2025年）
  - 按月份分组（如2026年2月、2026年1月）

- **展示内容**：
  - 年份标题 + 该年文章数
  - 月份标题 + 该月文章数
  - 文章列表：标题、发布日期、分类

- **交互逻辑**：
  - 默认展开最新年份
  - 点击年份展开/收起该年月份
  - 点击月份展开/收起该月文章
  - 点击文章标题跳转详情页

**验收标准**：
- [ ] 访问 `/archive` 显示归档页面
- [ ] 文章按年月正确分组
- [ ] 显示每个分组的文章数量
- [ ] 年份/月份可展开收起
- [ ] 点击文章标题可跳转详情
- [ ] 导航栏添加"归档"入口

---

#### REQ-013: 访问统计可视化

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-005-EXT |
| **优先级** | P1-重要 |
| **当前状态** | 后端API已有，前端仅有基础数字 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：后台仪表盘页面
- **图表类型**：
  - 折线图：近7天/30天访问趋势
  - 柱状图：按月访问量对比
  - 饼图：访问来源分布（直接访问、搜索引擎等）

- **数据维度**：
  - 访问量（PV）
  - 独立访客（UV）
  - 页面浏览量
  - 文章阅读量排名

- **时间筛选**：
  - 今日
  - 近7天
  - 近30天
  - 自定义时间段

**验收标准**：
- [ ] 仪表盘显示访问趋势折线图
- [ ] 支持切换时间维度（日/周/月）
- [ ] 显示热门文章排名
- [ ] 图表数据与后端API一致
- [ ] 图表支持hover显示详情

---

#### REQ-014: 登录安全增强

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-001-EXT |
| **优先级** | P1-重要 |
| **当前状态** | JWT已实现，缺少安全限制 |
| **依赖项** | 无 |

**功能细节**：
- **登录失败限制**：
  - 连续失败5次后锁定账户15分钟
  - 显示剩余尝试次数
  - 锁定期间显示解锁倒计时

- **自动登出**：
  - Token有效期：24小时
  - 无操作超时：2小时自动登出
  - 登出前5分钟提示用户

- **安全提示**：
  - 异常登录IP提醒
  - 登录记录查询

**验收标准**：
- [ ] 连续失败5次后账户锁定
- [ ] 锁定期间无法登录
- [ ] 15分钟后自动解锁
- [ ] 显示剩余尝试次数
- [ ] 无操作2小时自动登出
- [ ] 登出前有提示

---

## 四、第三阶段：增强功能

### 4.1 阶段目标

提升用户体验，增加锦上添花的功能。

### 4.2 阶段验收标准

| 序号 | 验收项 | 验收标准 |
|------|--------|----------|
| 1 | 分享功能 | 文章可分享到主流社交平台 |
| 2 | 个性化设置 | 支持背景色、主题自定义 |
| 3 | 写作辅助 | 写作模式、灵感收集可用 |
| 4 | 数据备份 | 支持手动/自动备份 |

---

### 4.3 第三阶段需求清单

#### REQ-015: 文章分享功能

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-004-EXT2 |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **展示位置**：文章详情页底部
- **分享平台**：
  - 微信（生成二维码）
  - 微博
  - QQ
  - 复制链接

- **分享内容**：
  - 文章标题
  - 文章摘要（前100字）
  - 文章链接

**验收标准**：
- [ ] 文章详情页显示分享按钮组
- [ ] 点击微信显示二维码
- [ ] 点击微博跳转分享页面
- [ ] 点击QQ跳转分享页面
- [ ] 点击复制链接显示成功提示

---

#### REQ-016: 背景色/主题设置

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-006 |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **预设主题**：
  - 默认白（当前）
  - 暗黑模式
  - 护眼绿
  - 暖色调

- **自定义颜色**：
  - 颜色选择器选择主色调
  - 系统自动生成配套的辅色调

- **存储方式**：
  - 保存到localStorage
  - 可选同步到用户配置

**验收标准**：
- [ ] 设置页显示主题选择
- [ ] 预设主题可一键切换
- [ ] 自定义颜色选择器可用
- [ ] 切换主题实时生效
- [ ] 刷新页面主题保持

---

#### REQ-017: 主页大图上传

| 属性 | 内容 |
|------|------|
| **需求ID** | FR-006-EXT |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | REQ-008 |

**功能细节**：
- **上传入口**：后台设置页
- **文件限制**：
  - 格式：jpg, png, webp
  - 大小：最大5MB
  - 尺寸：建议1920x600以上

- **处理逻辑**：
  - 自动压缩优化
  - 自动裁剪适配
  - 显示上传进度

**验收标准**：
- [ ] 后台设置页显示大图上传入口
- [ ] 支持拖拽上传
- [ ] 显示上传进度
- [ ] 上传后前台立即更新
- [ ] 文件格式和大小限制生效

---

#### REQ-018: 模板样式设置

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-004 |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **字体设置**：
  - 标题字体选择
  - 正文字体选择
  - 字号大小调整

- **布局设置**：
  - 文章列表样式（列表/卡片）
  - 导航栏位置（顶部/侧边）
  - 内容区宽度

**验收标准**：
- [ ] 设置页显示样式配置选项
- [ ] 字体切换实时预览
- [ ] 布局切换正确生效
- [ ] 配置保存后持久化

---

#### REQ-019: 快捷键设置

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-004-EXT |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **预设快捷键**：
  - `Ctrl+N`：新建文章
  - `Ctrl+S`：保存文章
  - `Ctrl+P`：发布文章
  - `Esc`：退出编辑

- **自定义功能**：
  - 可修改快捷键组合
  - 显示快捷键冲突提示

**验收标准**：
- [ ] 后台页面支持快捷键操作
- [ ] 设置页显示快捷键列表
- [ ] 快捷键可自定义
- [ ] 冲突时显示提示

---

#### REQ-020: 写作模式

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-006 |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **界面简化**：
  - 隐藏侧边栏
  - 隐藏顶部导航
  - 编辑区域全屏
  - 暗色背景减少干扰

- **辅助功能**：
  - 实时字数统计
  - 专注时间计时器
  - 打字机音效（可选）

- **退出方式**：
  - `Esc`键退出
  - 点击右上角退出按钮

**验收标准**：
- [ ] 编辑器有"专注模式"入口
- [ ] 进入后界面简化
- [ ] 显示实时字数统计
- [ ] 显示专注时间计时
- [ ] Esc键可退出

---

#### REQ-021: 灵感收集

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-006-EXT |
| **优先级** | P2-增强 |
| **当前状态** | 后端API已有，前端缺失 |
| **依赖项** | 无 |

**功能细节**：
- **灵感记录**：
  - 快速输入框（限200字）
  - 支持添加标签
  - 支持关联文章

- **灵感管理**：
  - 列表展示所有灵感
  - 按标签筛选
  - 按时间排序
  - 搜索功能

- **灵感使用**：
  - 一键转为文章草稿
  - 在编辑器中插入灵感

**验收标准**：
- [ ] 后台显示灵感管理入口
- [ ] 支持快速记录灵感
- [ ] 灵感列表正确展示
- [ ] 支持标签筛选
- [ ] 可将灵感转为文章草稿

---

#### REQ-022: 本地备份

| 属性 | 内容 |
|------|------|
| **需求ID** | BR-005-EXT2 |
| **优先级** | P2-增强 |
| **当前状态** | 完全缺失 |
| **依赖项** | 无 |

**功能细节**：
- **备份内容**：
  - 所有文章（含草稿）
  - 所有图片
  - 系统设置
  - 分类和标签

- **备份方式**：
  - 手动备份：点击按钮立即备份
  - 定时备份：每日凌晨自动备份

- **备份文件**：
  - 格式：ZIP压缩包
  - 命名：backup_YYYYMMDD_HHMMSS.zip
  - 存储：服务器本地目录

- **备份管理**：
  - 显示备份历史列表
  - 支持下载备份文件
  - 支持删除旧备份
  - 最多保留10个备份文件

**验收标准**：
- [ ] 设置页显示备份功能入口
- [ ] 点击"立即备份"生成备份文件
- [ ] 显示备份历史列表
- [ ] 支持下载备份文件
- [ ] 定时备份正常执行
- [ ] 超过10个自动清理最旧备份

---

## 五、需求依赖关系图

```
第一阶段（紧急修复）
├── REQ-001 人间足迹路由 ─────┐
├── REQ-002 人生地图路由 ─────┤
├── REQ-003 音乐播放器集成 ───┤──→ REQ-007 导航栏扩展
├── REQ-004 图片管理集成 ─────┤
├── REQ-005 城市管理集成 ─────┤
└── REQ-006 音乐管理集成 ─────┘

第二阶段（核心补全）
├── REQ-008 主页大图 ─────────┐
├── REQ-009 时间轴 ───────────┤──→ 首页完整性
├── REQ-010 网站介绍 ─────────┘
├── REQ-011 文章回收站 ───────→ 文章管理完整性
├── REQ-012 文章归档 ─────────→ 内容组织完整性
├── REQ-013 访问统计可视化 ───→ 数据可视化
└── REQ-014 登录安全增强 ─────→ 安全增强

第三阶段（增强功能）
├── REQ-015 分享功能
├── REQ-016 主题设置
├── REQ-017 主页大图上传 ─────→ 依赖 REQ-008
├── REQ-018 模板样式设置
├── REQ-019 快捷键设置
├── REQ-020 写作模式
├── REQ-021 灵感收集
└── REQ-022 本地备份
```

---

## 六、附录

### 6.1 需求统计

| 阶段 | 需求数量 | P0 | P1 | P2 |
|------|----------|-----|-----|-----|
| 第一阶段 | 7 | 7 | 0 | 0 |
| 第二阶段 | 7 | 0 | 7 | 0 |
| 第三阶段 | 8 | 0 | 0 | 8 |
| **总计** | **22** | **7** | **7** | **8** |

### 6.2 文档版本

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v1.1.0 | 2026-02-17 | 基于完成度报告重新梳理优先级，补充验收标准 |

---

**文档结束**

*本文档为未完成需求的优先级确认清单，包含详细的功能细节和验收标准。*
